# ğŸ—ƒ Database

## ORM (Object Relational Mapping)
> ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ í˜¸í™˜ë˜ì§€ ì•ŠëŠ” ìœ í˜•ì˜ ì‹œìŠ¤í…œ ê°„ì˜ ë°ì´í„°ë¥¼ ë³€í™˜í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ê¸°ìˆ 
>
> íŒŒì´ì¬ì—ì„œëŠ” `SQLAlchemy`, `peewee` ë¼ì´ë¸ŒëŸ¬ë¦¬
>
> `Django`ì—ì„œëŠ” ë‚´ì¥ `Django ORM` ì‚¬ìš©

```python
Genre.objects.all()
```

- ëª¨ë¸ ì„¤ê³„ ë° ë°˜ì˜
    1. í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ì—¬ ë‚´ê°€ ì›í•˜ëŠ” DBêµ¬ì¡° ìƒì„±
    2. í´ë˜ìŠ¤ ë‚´ìš©ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ë°˜ì˜í•˜ê¸° ìœ„í•œ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ìƒì„±
    3. DBì— migrate

```python
class Genre(models.Model) :
name = models.CharFireld(max_lenth = 30)
```
```bash
$ python manage.py makemigrations

$ python manage.py migrate
```

### Migration (ë§ˆì´ê·¸ë ˆì´ì…˜)
> Modelì— ìƒê¸´ ë³€í™”ë¥¼ DBì— ë°˜ì˜
>
> ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì„ ë§Œë“¤ì–´ DBìŠ¤í‚¤ë§ˆë¥¼ ë°˜ì˜

- ëª…ë ¹ì–´
    - makemigrations : ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ìƒì„±
    - migrate : ë§ˆì´ê·¸ë ˆì´ì…˜ì„ DBì— ë°˜ì˜


```sql
BEGIN;

CREATE TABLE 'db_genre' (
    'id' integer NOT NULL PRIMARY KEY AUTOINCREMENT,
    'name' varchar(30) NOT NULL
);

COMMIT;
```

- ë°ì´í„°ë² ì´ìŠ¤ ì¡°ì‘
    - Class name.Manager.Queryset api

```
Genre.objects.all()
```

## ORM ê¸°ë³¸ ì¡°ì‘

### Create
```python
# create ë©”ì„œë“œ í™œìš©
Genre.objects.create(name='ë°œë¼ë“œ')

# ì¸ìŠ¤í„´ìŠ¤ ì¡°ì‘
genre = Genre()
genre.name = 'ì¸ë””ë°´ë“œ'
genre.save()
```

### Read
```python
# ì „ì²´ ë°ì´í„° ì¡°íšŒ
Genre.objects.all()

# <QuerySet [<Genre: Genre object (1)>, <Genre: Genre object (2)>, <Genre: Genre object (3)>]>

# ì¼ë¶€ ë°ì´í„° ì¡°íšŒ(get)
Genre.objects.get(id=1)

# <Genre: Genre object (1)>

# ì¼ë¶€ ë°ì´í„° ì¡°íšŒ(filter)
Genre.objects.filter(id=1)

# <QuerySet [<Genre: Genre object (1)>]>
```

### Update
```python
# genre ê°ì²´ í™œìš©
genre = Genre.objects.get(id=1)

# genre ê°ì²´ ì†ì„± ë³€ê²½
genre.name = 'íŠ¸ë¡œíŠ¸'

# genre ê°ì²´ ì €ì¥
genre.save()
```

### Delete
```python
# genre ê°ì²´ í™œìš©
genre = Genre.objects.get(id-1)

# genre ê°ì²´ ì‚­ì œ
genre.delete()
```

### Date
```python
artist = Artist()
artist.name = 'ì•„ì´ë¸Œ'
artist.debut = datetime.date(2021, 12, 1)
artist.save()

artist.debut = '2019-12-26'
```