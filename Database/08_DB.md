# ğŸ—ƒ Database

## QuerySet API

### __gt (ì´ˆê³¼)
> Greater than
>
```python
Entry.objects.filter(id__gt=4)
```
```sql
SELECT ... WHERE id > 4;
```

### __gte (ì´ìƒ)
> Greater than equal
```python
Entry.objects.filter(id__gte=4)
```
```sql
SELECT ... WHERE id >= 4;
```

### __lt (ë¯¸ë§Œ)
> Lower than
```python
Entry.objects.filter(id__lt=4)
```
```sql
SELECT ... WHERE id < 4;
```

### __lte (ì´í•˜)
> Lower than equal
```python
Entry.objects.filter(id__lt=4)
```
```sql
SELECT ... WHERE id <= 4;
```

### __in
> í¬í•¨ ê°’
>
```python
Entry.objects.filter(id__in=[1, 3, 4])
Entry.objects.filter(headline__in='abc')
```
```sql
SELECT ... WHERE id IN (1, 3, 4);
SELECT ... WHERE headline IN ('a', 'b', 'c');
```

### __startwith
> ì‹œì‘ë¬¸ìì—´ ì°¾ê¸°
>
```python
Entry.objects.filter(headline__startwith='Lennon')
```
```sql
SELECT ... WHERE headline LIKE 'Lennon%';
```

### __istartwith
> ì‹œì‘ë¬¸ìì—´ ì°¾ê¸°
>
```python
Entry.objects.filter(headline__istartwith='Lennon')
```
```sql
SELECT ... WHERE headline ILIKE 'Lennon%';
```

### __contains
> ì¤‘ê°„ë¬¸ìì—´ ì°¾ê¸°
>
```python
Entry.objects.filter(headline__contains='Lennon')
```
```sql
SELECT ... WHERE headline ILIKE '%Lennon%';
```

### __icontains
> ì¤‘ê°„ë¬¸ìì—´ ì°¾ê¸°
>
```python
Entry.objects.filter(headline__icontains='Lennon')
```
```sql
SELECT ... WHERE headline ILIKE '%Lennon%';
```

### __range
> ë²”ìœ„
>
```python
import datetime
strat_date = datetime.date(2005, 1, 1)
end_date = datetime.date(2005, 3, 31)

Entry.objects.filter(pub_date__range=(start_date, end_date))
```
```sql
SELECT ... WHERE pub_date BETWEEN '2005-01-01' AND '2005-03-31';
```

### ë³µí•© í™œìš©

```python
inner_qs = Blog.objects.filter(name__contains='Cheddar')
entries = Entry.objects.filter(blog__in=inner_qs)
```
```sql
SELECT ... WHERE blog.id IN (
    SELECT id FROM ... WHERE NAME LIKE '%Cheddar%';
```

### LIMIT

```python
Entry.objects.all()[0]
```
```sql
SELECT ... LIMIT 1;
```

### ORDER BY (ì˜¤ë¦„ì°¨ìˆœ)

```python
Entry.objects.order_by('id')
```
```sql
SELECT ... ORDER BY id;
```

### ORDER BY (ë‚´ë¦¼ì°¨ìˆœ)

```python
Entry.objects.order_by('-id')
```
```sql
SELECT ... ORDER BY id DESC;
```

## ëª¨ë¸ë§ (ORM)

```python
class Genre(models.Model) :
    name = models.CharField(max_length=30)
    
class Artist(models.Model) :
    name = models.CharField(max_length=30)
    debut = models.DateField()
    
class Album(models.Model) :
    name = models.CharField(max_length=30)
    genre = models.ForeignKey('Genre', on_delete=models.CASCADE)
    artist = models.ForeignKey('Artist', on_delete=models.CASCADE)
```

### models.ForeignKey
> 2ê°œì˜ í•„ìˆ˜ ìœ„ì¹˜ ì¸ì
>
### Model class 
>ì°¸ì¡°í•˜ëŠ” ëª¨ë¸
>
### on_delete
> ì™¸ë˜ í‚¤ê°€ ì°¸ì¡°í•˜ëŠ” ê°ì²´ê°€ ì‚­ì œë˜ì—ˆì„ ë•Œ ì²˜ë¦¬ ë°©ì‹
>
1. CASCADE : ë¶€ëª¨ ê°ì²´ê°€ ì‚­ì œ ëì„ ë•Œ ì´ë¥¼ ì°¸ì¡°í•˜ëŠ” ê°ì²´ë„ ì‚­ì œ (ê²Œì‹œê¸€(ë¶€ëª¨ ê°ì²´)ì„ ì§€ìš°ë©´ ëŒ“ê¸€(ìì‹ ê°ì²´)ë„ ì§€ì›Œì§„ë‹¤.)
2. PROTECT : ì‚­ì œë˜ì§€ ì•ŠìŒ (ê²Œì‹œê¸€(ë¶€ëª¨ ê°ì²´)ì— ëŒ“ê¸€(ìì‹ ê°ì²´)ê°€ ìˆìœ¼ë©´ ê²Œì‹œê¸€ ì‚­ì œ ë¶ˆê°€ëŠ¥)
3. SET_NULL : NULL ì„¤ì •
4. SET_DEFAULT : ê¸°ë³¸ ê°’ ì„¤ì •

### ì°¸ì¡°ì™€ ì—­ì°¸ì¡°
1. ì°¸ì¡°
```python
album = Album.objects.get(1)
album.artist
album.genre
```
2. ì—­ì°¸ì¡°
```python
genre = Genre.objects.get(1)
genre.album_set.all()
```

